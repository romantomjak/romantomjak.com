<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Roman Tomjak">
    
    <meta name="generator" content="Hugo 0.47" />
    <title>Parsing and returning JSON in Go &middot; Notes on programming</title>
    
    <link rel="shortcut icon" href="https://romantomjak.com/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="https://romantomjak.com/images/apple-touch-icon.png">
    <link rel="stylesheet" href="https://romantomjak.com/css/style.css">
    <link rel="stylesheet" href="https://romantomjak.com/css/syntax/atom-one-dark.css">
    
</head>
<body>


<header class="header">
    <a href="/">
        <img class="header__gif--static hidden" src="https://romantomjak.com/images/mother-of-god.png"/>
        
        <img class="header__gif" src="https://romantomjak.com/images/mother-of-god.gif"/>
    </a>
    <h1 class="header__title">Notes on programming</h1>
    <nav class="hidden">
        <ul class="nav-primary">
            <li><a class="nav-primary__link" href="/">blog</a>/</li>
            <li><a class="nav-primary__link" href="/code">code</a>/</li>
            <li><a class="nav-primary__link" href="/about">me</a></li>
        </ul>
    </nav>
</header>


<main class="article">
    <h1 class="article__title">Parsing and returning JSON in Go</h1>
    <article class="article__content">
        <header class="article__header">
            <time datetime="2018-12-15T11:21:06.000&#43;00:00">December 15, 2018</time> &middot; 2 min read
        </header>
        

<p>Imagine you&rsquo;re working for the worlds largest Wool Sock provider <em>WOOSOK</em>, handling on average 90k requests a day through your eCommerce platform of choice. It&rsquo;s 11 AM on a Monday morning, you&rsquo;re browsing Hacker News, when suddenly your boss Slacks you asking why &ldquo;the website is slow&rdquo;. You open the home page of WOOSOK and indeed, it took 8s to load the home page.</p>

<p>Twenty minutes later you&rsquo;ve narrowed it down to a particular URL that when visited generates a list of all Purchase Orders ever created. Quick look at the HTTP response times in Grafana reveals that this has been happening for a while now, exactly at 11 AM.</p>

<p>Turns out, your New Zealand yarn provider has implemented automated PO approvals with a nifty Selenium script that runs at midnight. The script visits the aforementioned URL, opens the detail view of an unapproved PO, approves it and then goes back and loads the dangerous URL again. This goes on until it has approved all POs for the day, which on average is around 100.</p>

<p>[ XKCD IMAGE BEGIN ]</p>

<p>&ldquo;13 minutes of outage during our peak sales hours is outrageous&rdquo;, yells your boss. &ldquo;You have to do something!&rdquo;. You comfort him and tell him you already have a plan - you&rsquo;re going to extract all PO related functionality into a microservice. It will not affect the website and will allow the provider to continue to use his script.</p>

<p>[ EOF XKCD IMAGE ]</p>

<h2 id="marshaling-json-data">Marshaling JSON data</h2>

<p>This functionality is provided by the standard library package <code>encoding/json</code>. Go is statically typed, meaning, that compiler needs to know what data types are you going to use at compile time.</p>

<ul>
<li>talk about structs</li>
<li>how to exclude fields</li>
</ul>

<h2 id="unmarshaling-json-data">Unmarshaling JSON data</h2>

<ul>
<li>parsing into interface{}</li>
</ul>

    </article>
</main>

<footer class="footer">
    <nav>
        <ul class="nav-secondary">
            <li>
                <a href="https://github.com/romantomjak">
                    <img class="nav-secondary__icon" src="https://romantomjak.com/images/github.svg" alt="Github" />
                </a>
            </li>
            <li>
                <a href="https://twitter.com/romantomjak">
                    <img class="nav-secondary__icon" src="https://romantomjak.com/images/twitter.svg" alt="Twitter" />
                </a>
            </li>
            <li>
                <a href="https://www.linkedin.com/in/romanstomjaks">
                    <img class="nav-secondary__icon" src="https://romantomjak.com/images/linkedin.svg" alt="LinkedIn" />
                </a>
            </li>
        </ul>
    </nav>
    <p>Copyright &copy; 2018 Roman Tomjak</p>
</footer>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67617807-9"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-67617807-9');
</script>
<script src="https://romantomjak.com/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

